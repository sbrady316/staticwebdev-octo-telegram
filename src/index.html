<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Vanilla JavaScript App</title>
</head>
<body>
  <script>
  async function getUserInfo() {
    const response = await fetch('/.auth/me');
    const payload = await response.json();
    console.log(`payload = ${payload}`);
    const { clientPrincipal } = payload;
    console.log(`clientPrincipal = ${clientPrincipal}`);
    return clientPrincipal;
  }

  // Do I need this?
  cp = getUserInfo().then(cp => cp);
  console.log(cp);
  document.body.innerHTML = "<p>You are " + cp + "</p>"
  </script>
  <main>
    <h1>Authenticator 5000</h1>
  </main>
</body>

</html>
